import{__assign as r,__awaiter as e,__generator as t}from"tslib";import{Auth as n}from"aws-amplify";import{actions as o}from"xstate";import"../../types/authenticator/user.mjs";import"../../types/authenticator/attributes.mjs";import"../../types/primitives/componentClassName.mjs";import"../../i18n/translations.mjs";import{trimValues as a}from"../../helpers/authenticator/utils.mjs";import"../../helpers/accountSettings/utils.mjs";var u=o.assign,i=o.stop,s=function(r){return i(r)},c=u({attributeToVerify:function(r){}}),m=u({challengeName:function(r){}}),l=u({requiredAttributes:function(r){}}),d=u({remoteError:function(r){return""}}),f=u({formValues:function(r){return{}}}),v=u({touched:function(r){return{}}}),p=u({unverifiedContactMethods:function(r){}}),h=u({username:function(r){}}),V=u({validationError:function(r){return{}}}),b=u({totpSecretCode:function(r,e){return e.data}}),g=u({challengeName:function(r,e){var t;return null===(t=e.data)||void 0===t?void 0:t.challengeName}}),y=u({requiredAttributes:function(r,e){var t,n;return null===(n=null===(t=e.data)||void 0===t?void 0:t.challengeParam)||void 0===n?void 0:n.requiredAttributes}}),_=u({redirectIntent:function(r){return"confirmPasswordReset"}}),w=u({redirectIntent:function(r){return"confirmSignUp"}}),j=u({authAttributes:function(r,e){var t,n,o=r.loginMechanisms[0];return{username:null!==(t=r.formValues[o])&&void 0!==t?t:r.formValues.username,password:null===(n=r.formValues)||void 0===n?void 0:n.password}}}),A=u({validationError:function(r,e){return e.data}}),C=u({remoteError:function(r,e){var t;return"NoUserPoolError"===e.data.name?"Configuration error (see console) â€“ please contact the administrator":(null===(t=e.data)||void 0===t?void 0:t.message)||e.data}}),E=u({unverifiedContactMethods:function(r,e){return e.data.unverified}}),N=u({user:function(r,e){return e.data.user||e.data}}),D=u({username:function(r,e){var t=r.formValues,n=t.username,o=t.country_code;return o&&(n="".concat(o).concat(n)),n}}),M=u({codeDeliveryDetails:function(r,e){return e.data.codeDeliveryDetails}}),P=u({authAttributes:function(r,e){return{username:r.formValues.username}}}),q=u({formValues:function(e,t){var n,o=t.data,a=o.name,u=o.value;return r(r({},e.formValues),((n={})[a]=u,n))}}),S=u({formValues:function(e,t){var n=r(r({},e.formValues),t.data);return a(n,"password")}}),x=u({touched:function(e,t){var n,o=t.data.name;return r(r({},e.touched),((n={})["".concat(o)]=!0,n))}}),I=function(r){return e(void 0,void 0,void 0,(function(){var e;return t(this,(function(t){switch(t.label){case 0:return e=r.username,[4,n.forgotPassword(e)];case 1:return[2,t.sent()]}}))}))},U=u({formValues:function(e,t){var n,o,a=e.loginMechanisms[0],u=void 0===a?"username":a;if(!e.formValues.phone_number&&"phone_number"!==u)return e.formValues;var i=e.formValues,s=e.country_code,c=i.phone_number?"phone_number":"username",m="".concat(null!==(o=i.country_code)&&void 0!==o?o:s).concat(i[c]).replace(/[^A-Z0-9+]/gi,""),l=r(r({},i),((n={})[c]=m,n));return delete l.country_code,l}});export{c as clearAttributeToVerify,m as clearChallengeName,d as clearError,f as clearFormValues,l as clearRequiredAttributes,v as clearTouched,p as clearUnverifiedContactMethods,h as clearUsername,V as clearValidationError,x as handleBlur,q as handleInput,S as handleSubmit,U as parsePhoneNumber,I as resendCode,g as setChallengeName,M as setCodeDeliveryDetails,_ as setConfirmResetPasswordIntent,w as setConfirmSignUpIntent,j as setCredentials,A as setFieldErrors,C as setRemoteError,y as setRequiredAttributes,b as setTotpSecretCode,E as setUnverifiedContactMethods,N as setUser,D as setUsername,P as setUsernameAuthAttributes,s as stopActor};
