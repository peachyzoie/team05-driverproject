import*as e from"react";import{isFunction as a}from"@aws-amplify/ui";const t=({max:e,min:a,step:t,value:n})=>{const l=(n-a)%t;return n=n-l+Math.round(l/t)*t,(n=Math.max(a,n))>e&&(n=e-(e-a)%t),n},n=({defaultValue:n=0,value:l,step:s=1,max:u=Number.MAX_SAFE_INTEGER,min:r=Number.MIN_SAFE_INTEGER,isDisabled:o,isReadOnly:c,onChange:m,onDecrease:i,onIncrease:h,onStepChange:p})=>{const d=void 0!==l;u=Math.max(r,u);const[b,v]=e.useState((()=>t({min:r,max:u,step:s,value:n}))),x=d?t({min:r,max:u,step:s,value:l}):b,C=o||c||x+s>u,I=o||c||x-s<r,[N,g]=e.useState(x),D=e.useCallback((e=>{g(e.target.value),a(m)&&m(e)}),[m]),E=e.useCallback((e=>{const n=parseFloat(e.target.value);if(isNaN(n))return;const l=t({min:r,max:u,step:s,value:n});d||v(l),a(p)&&p(l),g(l)}),[r,u,s,d,p]),f=e.useCallback((()=>{d||v(x+s),a(p)&&p(x+s),a(h)&&h(),g(x+s)}),[s,x,d,h,p]),k=e.useCallback((()=>{d||v(x-s),a(p)&&p(x-s),a(i)&&i(),g(x-s)}),[s,x,d,i,p]),M=e.useCallback((e=>{e.currentTarget.blur()}),[]);return{step:s,value:x,inputValue:N,handleDecrease:k,handleIncrease:f,handleOnBlur:E,handleOnChange:D,handleOnWheel:M,setInputValue:g,shouldDisableDecreaseButton:I,shouldDisableIncreaseButton:C}};export{n as useStepper};
