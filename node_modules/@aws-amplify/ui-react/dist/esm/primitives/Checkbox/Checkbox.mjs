import{__rest as e}from"tslib";import*as t from"react";import a from"classnames";import{Flex as s}from"../Flex/Flex.mjs";import{ComponentClassNames as o}from"../shared/constants.mjs";import"../View/View.mjs";import{IconCheck as c}from"../Icon/icons/IconCheck.mjs";import{IconIndeterminate as d}from"../Icon/icons/IconIndeterminate.mjs";import{Input as i}from"../Input/Input.mjs";import{Text as n}from"../Text/Text.mjs";import{VisuallyHidden as r}from"../VisuallyHidden/VisuallyHidden.mjs";import{getTestId as l}from"../utils/getTestId.mjs";import{useStableId as m}from"../utils/useStableId.mjs";import{useCheckbox as b}from"./useCheckbox.mjs";import{splitPrimitiveProps as h}from"../utils/splitPrimitiveProps.mjs";import{classNameModifierByFlag as u}from"../shared/utils.mjs";const p=t.forwardRef(((p,k)=>{var{checked:f,className:C,defaultChecked:x,hasError:I,isDisabled:j,isIndeterminate:E,label:y,labelHidden:N,labelPosition:g,onChange:B,testId:F,inputStyles:H}=p,P=e(p,["checked","className","defaultChecked","hasError","isDisabled","isIndeterminate","label","labelHidden","labelPosition","onChange","testId","inputStyles"]);const{styleProps:V,rest:v}=h(P),D=void 0!==f?f:x,{dataChecked:S,dataFocus:w,onBlur:O,onChange:T,onFocus:L,setDataChecked:q}=b(D,B);t.useEffect((()=>{void 0!==f&&f!==S&&q(f)}),[f,S,q]);const M=m();t.useEffect((()=>{const e=document.querySelector(`[data-id="${M}"]`);e&&"boolean"==typeof E&&(e.indeterminate=E)}),[M,E]);const R=l(F,o.CheckboxButton),$=l(F,o.CheckboxIcon),z=l(F,o.CheckboxLabel),A=a(o.CheckboxButton,u(o.CheckboxButton,"disabled",j),u(o.CheckboxButton,"error",I),u(o.CheckboxButton,"focused",w)),G=a(o.CheckboxIcon,u(o.CheckboxIcon,"checked",S),u(o.CheckboxIcon,"disabled",j)),J=t.useMemo((()=>E?t.createElement(d,{className:a(G,u(o.CheckboxIcon,"indeterminate",E)),"data-testid":$}):t.createElement(c,{className:G,"data-checked":S,"data-disabled":j,"data-testid":$})),[S,G,$,j,E]);return t.createElement(s,Object.assign({as:"label",className:a(o.Checkbox,u(o.Checkbox,"disabled",j),C),"data-disabled":j,"data-label-position":g,testId:F},V),t.createElement(r,null,t.createElement(i,Object.assign({checked:f,className:o.CheckboxInput,"data-id":M,defaultChecked:x,isDisabled:j,onBlur:O,onChange:T,onFocus:L,ref:k,type:"checkbox"},v))),y&&t.createElement(n,{as:"span",className:a(o.CheckboxLabel,{[o.VisuallyHidden]:N}),"data-disabled":j,testId:z},y),t.createElement(s,Object.assign({"aria-hidden":"true",as:"span",className:A,"data-checked":S,"data-disabled":j,"data-focus":w,"data-error":I,testId:R},H),J))}));p.displayName="Checkbox";export{p as Checkbox};
